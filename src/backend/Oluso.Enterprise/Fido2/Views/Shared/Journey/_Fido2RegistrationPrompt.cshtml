@using Oluso.Enterprise.Fido2.Steps
@model Fido2RegistrationPromptViewModel

<div class="fido2-registration-prompt">
    <div class="passkey-icon">
        <svg viewBox="0 0 24 24" width="64" height="64">
            <path fill="currentColor" d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
        </svg>
    </div>

    <h2 class="title">@(Model.Title ?? "Set Up a Passkey")</h2>
    <p class="description">@(Model.Description ?? "Sign in faster and more securely with a passkey.")</p>

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger">
            @Model.ErrorMessage
        </div>
    }

    <div class="benefits">
        <div class="benefit-item">
            <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
            </svg>
            <span>More secure than passwords</span>
        </div>
        <div class="benefit-item">
            <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
            </svg>
            <span>Sign in instantly</span>
        </div>
        <div class="benefit-item">
            <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>
            </svg>
            <span>Works on this device</span>
        </div>
    </div>

    <form method="post" class="form-actions">
        <input type="hidden" name="action" value="register" />
        <button type="submit" class="btn btn-primary btn-block">
            <svg viewBox="0 0 24 24" width="20" height="20" style="margin-right: 8px;">
                <path fill="currentColor" d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
            </svg>
            Set Up Passkey
        </button>

        @if (Model.AllowSkip)
        {
            <button type="submit" name="action" value="skip" class="btn btn-link btn-block">
                Skip for now
            </button>
        }
    </form>

    @if (Model.ExistingCredentialCount > 0)
    {
        <p class="existing-note">
            You already have @Model.ExistingCredentialCount passkey@(Model.ExistingCredentialCount > 1 ? "s" : "") registered.
        </p>
    }
</div>

<style>
.fido2-registration-prompt {
    max-width: 420px;
    margin: 0 auto;
    padding: 2rem;
    text-align: center;
}

.passkey-icon {
    color: #667eea;
    margin-bottom: 1.5rem;
}

.title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #1a202c;
}

.description {
    color: #718096;
    margin-bottom: 1.5rem;
}

.benefits {
    text-align: left;
    background: #f7fafc;
    border-radius: 0.5rem;
    padding: 1rem;
    margin-bottom: 1.5rem;
}

.benefit-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 0;
    color: #4a5568;
}

.benefit-item svg {
    color: #48bb78;
    flex-shrink: 0;
}

.form-actions {
    margin-top: 1.5rem;
}

.btn-primary {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    padding: 0.875rem 1.5rem;
    font-size: 1rem;
    font-weight: 500;
}

.btn-primary:hover {
    background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
}

.btn-link {
    color: #718096;
    text-decoration: none;
    margin-top: 0.5rem;
}

.btn-link:hover {
    color: #4a5568;
    text-decoration: underline;
}

.existing-note {
    font-size: 0.875rem;
    color: #a0aec0;
    margin-top: 1rem;
}

.alert-danger {
    background: #fed7d7;
    color: #c53030;
    padding: 0.75rem 1rem;
    border-radius: 0.375rem;
    margin-bottom: 1rem;
    text-align: left;
}
</style>
