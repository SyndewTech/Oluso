@using Oluso.UserJourneys.Steps
@model ExternalLoginViewModel

<div class="external-login-card">
    <h1 class="title">Sign in with</h1>

    @if (!string.IsNullOrEmpty(Model?.ErrorMessage))
    {
        <div class="alert alert-danger">@Model.ErrorMessage</div>
    }

    <div class="providers">
        @if (Model?.Providers != null)
        {
            @foreach (var provider in Model.Providers)
            {
                <form method="post" class="provider-form">
                    <input type="hidden" name="provider" value="@provider.Scheme" />
                    <button type="submit" class="provider-button">
                        @if (!string.IsNullOrEmpty(provider.IconUrl))
                        {
                            <img src="@provider.IconUrl" alt="" class="provider-icon" />
                        }
                        else
                        {
                            <span class="provider-icon-placeholder">
                                @provider.DisplayName.FirstOrDefault()
                            </span>
                        }
                        <span class="provider-name">@provider.DisplayName</span>
                    </button>
                </form>
            }
        }
    </div>
</div>

<style>
.external-login-card {
    max-width: 400px;
    margin: 0 auto;
    padding: 2rem;
}

.title {
    text-align: center;
    margin-bottom: 1.5rem;
}

.providers {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.provider-form {
    margin: 0;
}

.provider-button {
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0.75rem 1rem;
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.2s, border-color 0.2s;
}

.provider-button:hover {
    background: #f8f9fa;
    border-color: #dee2e6;
}

.provider-icon {
    width: 24px;
    height: 24px;
    margin-right: 0.75rem;
    border-radius: 0.25rem;
}

.provider-icon-placeholder {
    width: 24px;
    height: 24px;
    margin-right: 0.75rem;
    background: #6c757d;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.25rem;
    font-weight: bold;
    font-size: 0.875rem;
}

.provider-name {
    flex: 1;
    text-align: left;
}

/* Provider-specific styling */
.provider-button[data-provider="google"] {
    border-color: #4285f4;
}

.provider-button[data-provider="microsoft"] {
    border-color: #00a4ef;
}

.provider-button[data-provider="github"] {
    border-color: #333;
}

.provider-button[data-provider="facebook"] {
    border-color: #1877f2;
}

.provider-button[data-provider="apple"] {
    border-color: #000;
}
</style>
