@model Oluso.UserJourneys.Steps.PasswordlessEmailVerifyViewModel

<div class="passwordless-email-verify-form">
    <h2>Check your email</h2>
    <p class="description">
        @if (Model.Mode == "magic_link")
        {
            <text>We've sent a magic link to <strong>@Model.Email</strong>. Click the link in the email to sign in.</text>
        }
        else
        {
            <text>We've sent a verification code to <strong>@Model.Email</strong>. Enter the code below.</text>
        }
    </p>

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger" role="alert">
            @Model.ErrorMessage
        </div>
    }

    @if (!string.IsNullOrEmpty(Model.SuccessMessage))
    {
        <div class="alert alert-success" role="alert">
            @Model.SuccessMessage
        </div>
    }

    @if (Model.Mode != "magic_link")
    {
        <form method="post">
            <div class="form-group mb-3">
                <label for="code" class="form-label">Verification Code</label>
                <input type="text"
                       id="code"
                       name="code"
                       class="form-control form-control-lg text-center"
                       placeholder="Enter code"
                       maxlength="8"
                       pattern="[0-9]*"
                       inputmode="numeric"
                       autocomplete="one-time-code"
                       required
                       autofocus />
                <small class="form-text text-muted">
                    Code expires in @Model.ExpirationMinutes minutes.
                </small>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary">Verify Code</button>
            </div>
        </form>
    }

    <div class="mt-4">
        <form method="post" class="d-inline">
            <input type="hidden" name="resend" value="true" />
            <button type="submit" class="btn btn-link p-0">
                @(Model.Mode == "magic_link" ? "Resend magic link" : "Resend code")
            </button>
        </form>
        <span class="mx-2">|</span>
        <form method="post" class="d-inline">
            <input type="hidden" name="change_email" value="true" />
            <button type="submit" class="btn btn-link p-0">Use a different email</button>
        </form>
    </div>
</div>
